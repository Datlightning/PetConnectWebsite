<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/petconnect.ico') }}">

    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>{% block title %}{% endblock %}</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link href="{{ url_for('static', filename='css/base.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/screen-size-media-queries.css') }}" rel="stylesheet">
    {% block headerinfo %}{% endblock %}
</head>
<nav>
    <div class="for-color"></div>
    <!-- Regular navbar -->
    <div id="Reg-Nav-Out">
        <div id="Reg-Nav-In">
            <!-- Nanogurus Logo -->
            <div style="display: flex">
                <a href="/" id="Nav-Logo-A">
                    <img src="../static/images/nanogurus_logo.png" height="40px">
                </a>
            </div>

            <!-- Navbar Links -->
            <div id="Nav-Link-Cont">
                <div class="link-container"><a class="nav-links" href="/">HOME</a></div>
                <div class="menu">
                    <a class="nav-links" href="/team">TEAM
                        <img src="../static/images/caret-down-solid.svg" height="15px">
                    </a>
                    <div class="sub-menu">
                        <a class="nav-links" href="/team#CurrMembers">CURRENT MEMBERS</a>
                        <a class="nav-links" href="/team#CoachMen">COACHES AND MENTORS</a>
                    </div>
                </div>
                <div class="link-container"><a class="nav-links" href="/outreaches">OUTREACHES</a></div>
                <div class="link-container"><a class="nav-links" href="/contact">CONTACT</a></div>
                <div class="link-container"><a class="nav-links" style="white-space: nowrap;" href="/scoring">CALCULATE SCORES</a></div>
                {% if session['logged_in'] is not true %}
                    <div class="link-container"><a class="nav-links" href="/member-login">MEMBERS LOGIN</a></div>
                {% endif %}
                {% if session['logged_in'] is true %}
                    <div class="menu">
                        <a class="nav-links">SCOUTING
                            <img src="../static/images/caret-down-solid.svg" height="15px">
                        </a>
                        <div class="sub-menu">
                            <a class="nav-links" href="/scouting">SCOUTING FORM</a>
                            <a class="nav-links" href="/display">SCOUTING DISPLAY</a>
                        </div>
                    </div>
                    <div class="menu">
                        <a class="nav-links">CALENDAR
                            <img src="../static/images/caret-down-solid.svg" height="15px">
                        </a>
                        <div class="sub-menu">
                            <a class="nav-links" href="/log-hours">ATTENDANCE</a>
                            <a class="nav-links" href="/calendar">CALENDAR/SIGN-UPS</a>
                            <a class="nav-links" href="/leaderboards">LEADERBOARDS</a>
                        </div>
                    </div>

                    <div class="menu">
                        <a class="nav-links" style="white-space: nowrap;">RUN TASKS
                            <img src="../static/images/caret-down-solid.svg" height="15px">
                        </a>
                        <div class="sub-menu">
                            <a onclick="UpdateDataSpreadsheet()" class="nav-links mouse">UPDATE DATA</a>
                            <a class="nav-links"
                               href="/logout">LOG {{ session['user'][0].upper() + session['user'][1:].upper() }} OUT</a>
                        </div>
                    </div>
                {% endif %}
            </div>
            <!-- Mobile Hamburger Icon -->
            <div class="hamburger">
                <div></div>
            </div>
        </div>
    </div>


    <!-- Mobile hamburger menu dropdown thing -->
    <div class="mobile-menu">
        <a class="nav-links" href="/">HOME</a>
        <div class="menu-mobile">
            <a class="nav-links has-drop mouse">TEAM
                <img src="../static/images/caret-down-solid.svg" height="15px">
            </a>
            <div class="sub-menu-mobile">
                <a class="nav-links" href="/team#CurrMembers">CURRENT MEMBERS</a>
                <a class="nav-links" href="/team#CoachMen">COACHES AND MENTORS</a>
            </div>
        </div>
        <a class="nav-links" href="/outreaches">OUTREACHES</a>
        <a class="nav-links" href="/contact">CONTACT</a>
        <a class="nav-links" href="/scoring">CALCULATE SCORES</a>
        {% if session['logged_in'] is not true %}
            <a class="nav-links" href="/member-login">MEMBERS LOGIN</a>
        {% endif %}
        {% if session['logged_in'] is true %}
            <div class="menu-mobile">
                <a class="nav-links has-drop mouse">SCOUTING
                    <img src="../static/images/caret-down-solid.svg" height="15px">
                </a>
                <div class="sub-menu-mobile">
                    <a class="nav-links" href="/scouting">SCOUTING FORM</a>
                    <a class="nav-links" href="/display">SCOUTING DISPLAY</a>
                </div>
            </div>
            <div class="menu-mobile">
                <a class="nav-links has-drop mouse">CALENDAR
                    <img src="../static/images/caret-down-solid.svg" height="15px">
                </a>
                <div class="sub-menu-mobile">
                    <a class="nav-links" href="/log-hours">ATTENDANCE</a>
                    <a class="nav-links" href="/calendar">CALENDAR/SIGN-UPS</a>
                    <a class="nav-links" href="/leaderboards">LEADERBOARDS</a>
                </div>
            </div>
            <div class="menu-mobile">
                <a class="nav-links has-drop mouse">RUN TASKS
                    <img src="../static/images/caret-down-solid.svg" height="15px">
                </a>
                <div class="sub-menu-mobile">
                    <a onclick="UpdateDataSpreadsheet()" class="nav-links mouse">UPDATE DATA</a>
                    <a class="nav-links" href="/logout">LOG {{ session['user'][0].upper() + session['user'][1:].upper() }} OUT</a>
                </div>
            </div>

        {% endif %}
    </div>
</nav>
<body>
<div class="loading-container" id="LoadingContainer">
    <div class="loading-spinner"></div>
</div>
<div id="body">
    {% block BodyContent %}
{% endblock %}
</div>
<footer>
    <div><h2>PetConnect</h2></div>
    <div><h3>Copyright Â© 2023 PetConnect</h3></div>
    <div>
        <a href="https://www.instagram.com/nanogurus4347/">
            <object class="footer-links" data="../static/images/instagram.svg" type="image/svg+xml"></object>
        </a>
        <a href="mailto: nanogurusftcrobotics@gmail.com">
            <object class="footer-links" data="../static/images/email.svg" type="image/svg+xml"></object>
        </a>
    </div>
</footer>
</body>

<script>
    function UpdateDataSpreadsheet() {
        $('#LoadingContainer').css('display', 'flex');
        $.ajax({
            url: '/update-data-spreadsheet',
            type: 'GET',
            success: function (response) {
                $('#LoadingContainer').css('display', 'none');
            },
            error: function (error) {
                $('#LoadingContainer').css('display', 'none');
            }
        });
    }

    const inViewport = (entries, observer) => {
        entries.forEach(entry => {
            entry.target.classList.toggle("is-inViewport", entry.isIntersecting);
            if (entry.isIntersecting) {
                entry.target.classList.add("first-time");
            }
        });
    };
    const Obs = new IntersectionObserver(inViewport);
    const obsOptions = {}; //See: https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API#Intersection_observer_options

    // Attach observer to every [data-inviewport] element:

    const ELs_inViewport = document.querySelectorAll('[data-inviewport]');
    ELs_inViewport.forEach(EL => {
        Obs.observe(EL, obsOptions);
    });
    $(document).ready(function () {
        let vh = $(window).height()
        let navH = $('nav').height()
        $('#body').css('margin-top', navH+'px')
        function placeFooter() {
            var footer = $('footer');
            footer.css('position', 'relative');
            var html = $('html');
            if (html.outerHeight() < window.outerHeight) {
                footer.css('position', 'absolute');
                footer.css('bottom', (0).toString());
            }
        }
        //placeFooter()
        var height = $('nav').height();
        $('.for-color').css('height', height + 'px');
        $('.hamburger').click(function () {
                $('.mobile-menu').toggleClass('animate-menu');
                $('.hamburger>div').toggleClass('opened');
            }
        )
        $(document).on('click tap', '.has-drop', function () {
            var $this = $(this)
            var $drop = $this.next('.sub-menu-mobile');
            $drop.toggleClass('show-menu-dropdown')
        })
        $('#LoadingContainer').css('display', 'none');
    });


</script>
</html>